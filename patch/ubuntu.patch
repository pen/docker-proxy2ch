--- a/Makefile
+++ b/Makefile
@@ -3,14 +3,14 @@
 OBJS = $(SOURCES:.cpp=.o)
 OBJS := $(OBJS:.c=.o)
 
-CFLAGS = -O2
-LDFLAGS = -lcurl -lpthread
+CFLAGS = -O2 -DUSE_LUA -I/usr/include/lua5.3
+LDFLAGS = -lcurl -lpthread -llua5.3
 
 UNAME := $(shell uname)
 HAVE_GNUTLS := $(shell pkg-config --libs gnutls >/dev/null 2>&1; echo $$?)
 
 ifneq ($(UNAME), Darwin)
-	LDFLAGS += -liconv
+#	LDFLAGS += -liconv
 	ifeq ($(HAVE_GNUTLS), 0)
 		CFLAGS += -DUSE_GNUTLS
 		LDFLAGS += -lgnutls
--- a/BBS2chProxyHttpHeaders.cpp
+++ b/BBS2chProxyHttpHeaders.cpp
@@ -1,4 +1,5 @@
 #include <algorithm>
+#include <cstring>
 #include "BBS2chProxyHttpHeaders.h"
 
 std::string& BBS2chProxyHttpHeaderEntry::getName(void)
